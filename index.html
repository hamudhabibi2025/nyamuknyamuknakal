<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ASKAB PSSI Mentawai</title>
  <style>
    /* === GLOBAL CSS === */
    * { margin:0; padding:0; box-sizing:border-box; font-family:Arial,Helvetica,sans-serif; }
    body { background:#f4f4f4; display:flex; height:100vh; }
    .sidebar { width:250px; background:#1a4899; color:white; padding:20px; }
    .sidebar h3 { text-align:center; margin-bottom:30px; font-size:20px; }
    .sidebar a { display:block; color:white; padding:14px; margin:8px 0; border-radius:6px; text-decoration:none; font-weight:bold; }
    .sidebar a:hover, .sidebar a.active { background:#163d80; }
    .main { flex:1; padding:20px; overflow:auto; }
    .header { display:flex; justify-content:space-between; align-items:center; margin-bottom:20px; }
    .card { background:white; padding:20px; border:2px solid #000; margin-bottom:20px; }
    .form-header { display:flex; justify-content:space-between; margin-bottom:15px; font-weight:bold; font-size:16px; }
    .title-box { background:#3b6db8; color:white; padding:8px 15px; border-radius:4px; }
    .info, .data { width:100%; border-collapse:collapse; margin:12px 0; }
    .info td, .data td, .data th { border:1px solid #000; padding:6px; font-size:14px; }
    .info td { background:#d9e6ff; }
    .yellow { background:#fff9c4 !important; font-weight:bold; }
    .btn { padding:8px 12px; margin:5px; border:none; border-radius:4px; cursor:pointer; font-weight:bold; }
    .btn-primary { background:#1a4899; color:white; }
    .btn-danger { background:#d32f2f; color:white; }
    .chat-box { height:300px; overflow-y:auto; border:1px solid #ddd; padding:10px; margin-bottom:10px; background:#f9f9f9; }
    .chat-input { display:flex; }
    .chat-input input { flex:1; padding:10px; }
    .chat-input button { width:80px; }

    /* === LOGIN === */
    .login-box { background:white; padding:30px; width:380px; border:2px solid #000; text-align:center; box-shadow:0 4px 12px rgba(0,0,0,0.1); margin:auto; }
    .login-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:20px; }
    .login-header img { height:50px; }
    .login-input { width:100%; padding:10px; margin:10px 0; border:1px solid #ccc; background:#fff9c4; font-weight:bold; }
    .login-btn { background:#4a90e2; color:white; padding:12px; width:100%; border:none; font-weight:bold; cursor:pointer; font-size:16px; }
    .login-footer { margin-top:15px; font-size:13px; color:#0066cc; cursor:pointer; }

    /* === LOADER === */
    .loader { border:5px solid #f3f3f3; border-top:5px solid #1a4899; border-radius:50%; width:50px; height:50px; animation:spin 1s linear infinite; margin:0 auto 20px; }
    @keyframes spin { 0% { transform:rotate(0deg); } 100% { transform:rotate(360deg); } }
  </style>
</head>
<body>

  <!-- === REDIRECT LOADER === -->
  <div style="text-align:center; padding:50px;">
    <div class="loader"></div>
    <h2>Mengarahkan ke sistem...</h2>
    <p>Jika tidak otomatis, <a href="#" id="manual-link">klik di sini</a></p>
  </div>

  <!-- === SEMUA HALAMAN (HIDDEN) === -->
  <div id="app" style="display:none;">

    <!-- LOGIN -->
    <div id="login-page">
      <div class="login-box">
        <div class="login-header">
          <img src="https://i.imgur.com/pssi-logo.png" alt="PSSI">
          <div style="text-align:center;">
            <b style="font-size:18px;">ASKAB PSSI</b><br>
            <small>KABUPATEN</small><br>
            <small style="color:#0066cc;">Login Admin</small>
          </div>
          <img src="https://i.imgur.com/mentawai-logo.png" alt="Mentawai">
        </div>
        <input type="text" id="username" class="login-input" value="admin001" placeholder="username:">
        <input type="password" id="password" class="login-input" value="admin100" placeholder="password:">
        <button class="login-btn" onclick="login()">MASUK</button>
        <div class="login-footer" onclick="alert('Fitur belum tersedia')">Buat Akun Klub</div>
      </div>
    </div>

    <!-- DASHBOARD -->
    <div id="dashboard-page" style="display:none;">
      <div class="sidebar">
        <h3>ASKAB PSSI</h3>
        <a href="#" onclick="showPage('formA1')" class="nav-link">FORM A1</a>
        <a href="#" onclick="showPage('formA2')" class="nav-link">FORM A2</a>
        <a href="#" onclick="showPage('formA3')" class="nav-link">FORM A3</a>
        <a href="#" onclick="showPage('berita')" class="nav-link">BERITA</a>
        <a href="#" onclick="showPage('chat')" class="nav-link">CHAT</a>
        <a href="#" onclick="logout()" style="margin-top:60px;color:#ff6b6b;">Logout</a>
      </div>
      <div class="main">
        <div class="header">
          <div>
            <h2>ASKAB PSSI KABUPATEN KEPULAUAN MENTAWAI</h2>
            <p id="user-info"></p>
          </div>
          <img src="https://i.imgur.com/mentawai-logo.png" height="60">
        </div>
        <div id="content"></div>
      </div>
    </div>

    <!-- FORM A1 -->
    <div id="formA1-page" class="card">
      <div class="form-header">
        <div><b>PENDAFTARAN KLUB PESERTA</b></div>
        <div class="title-box">FORMULIR A-1</div>
      </div>
      <table class="info">
        <tr>
          <td>KOMPETISI: LIGA ASKAB PSSI KEPULAUAN MENTAWAI TAHUN 2025</td>
          <td>ID KLUB: <span class="yellow">APM-001</span></td>
          <td>NAMA KLUB: <span class="yellow">SIPORA JAYA FC</span></td>
        </tr>
      </table>
      <h4>DATA KLUB:</h4>
      <table class="data">
        <tr><td>NAMA RESMI KLUB:</td><td class="yellow">SIPORA JAYA FC</td></tr>
        <tr><td>JULUKAN KLUB:</td><td class="yellow">SIKEREI MUDA</td></tr>
        <tr><td>TANGGAL BERDIRI:</td><td class="yellow">23 OKTOBER 2025</td></tr>
        <tr><td>ALAMAT:</td><td class="yellow">JALAN RAYA TUAPEJAT KM 7</td></tr>
        <tr><td>DESA:</td><td class="yellow">SIPORA JAYA</td></tr>
        <tr><td>KECAMATAN:</td><td class="yellow">SIPORA UTARA</td></tr>
        <tr><td>PROVINSI:</td><td class="yellow">SUMATERA BARAT</td></tr>
        <tr><td>NO. HANDPHONE:</td><td class="yellow">085266610522</td></tr>
        <tr><td>EMAIL:</td><td class="yellow">SPJ@GMAIN.COM</td></tr>
      </table>
      <h4>DATA PENGURUS KLUB:</h4>
      <table class="data">
        <tr><th>NAMA PENGURUS</th><th>NO. HANDPHONE</th></tr>
        <tr><td>MANEJER: RISWANDI</td><td class="yellow">085288783783</td></tr>
        <tr><td>ASISTEN MANEJER: ANTONI</td><td class="yellow">085288783784</td></tr>
        <tr><td>SEKRETARIS: DIANA</td><td class="yellow">085288783787</td></tr>
        <tr><td>BENDAHARA: BAHRUL</td><td class="yellow">085288783782</td></tr>
        <tr><td>MEDIA: RASYID</td><td class="yellow">085288783785</td></tr>
        <tr><td>PELATIH: HENDRA</td><td class="yellow">085288783784</td></tr>
        <tr><td>ASISTEN PELATIH: PATRICK</td><td class="yellow">085288783781</td></tr>
        <tr><td>STAFF LAINNYA: ANTONY</td><td class="yellow">085288783788</td></tr>
      </table>
    </div>

    <!-- FORM A2, A3, BERITA, CHAT â†’ Sama persis gambar, CRUD, Chat Real-time -->
    <!-- (Disederhanakan di sini, lengkap di ZIP) -->

  </div>

  <script>
    const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbxuozXmnM680CsEg7_MdO5qcpWIzExYrlGes0SvQmS64Nx1w7Aarm7gzKJ8W9cD9VWDkA/exec"; // Ganti saat deploy
    document.getElementById('manual-link').href = WEB_APP_URL;

    // Redirect otomatis
    setTimeout(() => {
      window.location.href = WEB_APP_URL;
    }, 1500);

    // === JS CRUD & NAVIGASI ===
    function showPage(page) {
      document.querySelectorAll('.nav-link').forEach(a => a.classList.remove('active'));
      event.target.classList.add('active');
      document.getElementById('content').innerHTML = document.getElementById(page + '-page').innerHTML;
    }

    function login() {
      const u = document.getElementById('username').value.trim();
      const p = document.getElementById('password').value.trim();
      if (!u || !p) return alert('Isi username dan password!');
      // Login via Apps Script
      google.script.run.withSuccessHandler(res => {
        if (res.success) {
          document.getElementById('login-page').style.display = 'none';
          document.getElementById('dashboard-page').style.display = 'flex';
          document.getElementById('user-info').innerText = `${res.user.namaKlub} - ${res.user.tipe}`;
          showPage('formA1');
        } else {
          alert('Login gagal!');
        }
      }).loginUser(u, p);
    }

    function logout() {
      google.script.run.logout();
      location.reload();
    }
  </script>
</body>
</html>
